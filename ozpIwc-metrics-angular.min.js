angular.module("ozpIwcAngular",[]).factory("ozpIwc",function(){var a=a||{};a.util=a.util||{},a.util.generateId=function(){return Math.floor(4294967295*Math.random()).toString(16)},a.util.now=function(){return(new Date).getTime()},a.util.extend=function(a,b){return b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b},a.util.structuredCloneSupport=function(){if(void 0!==a.util.structuredCloneSupport.cache)return a.util.structuredCloneSupport.cache;var b=!1;try{window.postMessage({toString:function(){b=!0},blob:new Blob},"*")}catch(c){b=!0}return a.util.structuredCloneSupport.cache=!b,a.util.structuredCloneSupport.cache},a.util.structuredCloneSupport.cache=void 0,a.util.clone=function(a){return Array.isArray(a)||"object"==typeof a?JSON.parse(JSON.stringify(a)):a},a.util.arrayContainsAll=function(a,b,c){return c=c||function(a,b){return a===b},b.every(function(b){return a.some(function(a){return c(a,b)})})},a.util.objectContainsAll=function(a,b,c){c=c||function(a,b){return a===b};for(var d in b)if(!c(a[d],b[d]))return!1;return!0};var a=a||{};a.metricsStats=a.metricsStats||{},a.metricsStats.DEFAULT_POOL_SIZE=1028,a.metricsStats.Sample=function(){this.clear()},a.metricsStats.Sample.prototype.update=function(a){this.values.push(a)},a.metricsStats.Sample.prototype.clear=function(){this.values=[],this.count=0},a.metricsStats.Sample.prototype.size=function(){return this.values.length},a.metricsStats.Sample.prototype.getValues=function(){return this.values},a.metricsStats.UniformSample=a.util.extend(a.metricsStats.Sample,function(b){a.metricsStats.Sample.apply(this),this.limit=b||a.metricsStats.DEFAULT_POOL_SIZE}),a.metricsStats.UniformSample.prototype.update=function(a){if(this.count++,this.size()<this.limit)this.values.push(a);else{var b=parseInt(Math.random()*this.count);b<this.limit&&(this.values[b]=a)}};var a=a||{};a.metricsStats=a.metricsStats||{},a.metricsStats.BinaryHeap=function(a){this.content=[],this.scoreFunction=a},a.metricsStats.BinaryHeap.prototype={clone:function(){var b=new a.metricsStats.BinaryHeap(this.scoreFunction);return b.content=JSON.parse(JSON.stringify(this.content)),b},push:function(a){this.content.push(a),this.bubbleUp(this.content.length-1)},peek:function(){return this.content[0]},pop:function(){var a=this.content[0],b=this.content.pop();return this.content.length>0&&(this.content[0]=b,this.sinkDown(0)),a},remove:function(a){for(var b=this.content.length,c=0;b>c;c++)if(this.content[c]==a){var d=this.content.pop();return c!=b-1&&(this.content[c]=d,this.scoreFunction(d)<this.scoreFunction(a)?this.bubbleUp(c):this.sinkDown(c)),!0}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(a){for(var b=this.content[a];a>0;){var c=Math.floor((a+1)/2)-1,d=this.content[c];if(!(this.scoreFunction(b)<this.scoreFunction(d)))break;this.content[c]=b,this.content[a]=d,a=c}},sinkDown:function(a){for(var b=this.content.length,c=this.content[a],d=this.scoreFunction(c);;){var e=2*(a+1),f=e-1,g=null;if(b>f){var h=this.content[f],i=this.scoreFunction(h);d>i&&(g=f)}if(b>e){var j=this.content[e],k=this.scoreFunction(j);(null==g?d:i)>k&&(g=e)}if(null==g)break;this.content[a]=this.content[g],this.content[g]=c,a=g}}};var a=a||{};a.metricsStats=a.metricsStats||{},a.metricsStats.DEFAULT_RESCALE_THRESHOLD=36e5,a.metricsStats.DEFAULT_DECAY_ALPHA=.015,a.metricsStats.ExponentiallyDecayingSample=a.util.extend(a.metricsStats.Sample,function(b,c){a.metricsStats.Sample.apply(this),this.limit=b||a.metricsStats.DEFAULT_POOL_SIZE,this.alpha=c||a.metricsStats.DEFAULT_DECAY_ALPHA,this.rescaleThreshold=a.metricsStats.DEFAULT_RESCALE_THRESHOLD}),a.metricsStats.ExponentiallyDecayingSample.prototype.getValues=function(){for(var a,b=[],c=this.values.clone();a=c.pop();)b.push(a.val);return b},a.metricsStats.ExponentiallyDecayingSample.prototype.size=function(){return this.values.size()},a.metricsStats.ExponentiallyDecayingSample.prototype.newHeap=function(){return new a.metricsStats.BinaryHeap(function(a){return a.priority})},a.metricsStats.ExponentiallyDecayingSample.prototype.now=function(){return a.util.now()},a.metricsStats.ExponentiallyDecayingSample.prototype.tick=function(){return this.now()/1e3},a.metricsStats.ExponentiallyDecayingSample.prototype.clear=function(){this.values=this.newHeap(),this.count=0,this.startTime=this.tick(),this.nextScaleTime=this.now()+this.rescaleThreshold},a.metricsStats.ExponentiallyDecayingSample.prototype.update=function(a,b){void 0==b?b=this.tick():b/=1e3;var c=this.weight(b-this.startTime)/Math.random(),d={val:a,priority:c};if(this.count<this.limit)this.count+=1,this.values.push(d);else{var e=this.values.peek();e.priority<c&&(this.values.push(d),this.values.pop())}this.now()>this.nextScaleTime&&this.rescale()},a.metricsStats.ExponentiallyDecayingSample.prototype.weight=function(a){return Math.exp(this.alpha*a)},a.metricsStats.ExponentiallyDecayingSample.prototype.rescale=function(){this.nextScaleTime=this.now()+this.rescaleThreshold;var a=this.values.content,b=[],c=this.startTime;this.startTime=this.tick();for(var d=0;d<a.length;d++)b.push({val:a[d].val,priority:a[d].priority*Math.exp(-this.alpha*(this.startTime-c))});this.values.content=b};var a=a||{};a.metricsStats=a.metricsStats||{},a.metricsStats.M1_ALPHA=1-Math.exp(-5/60),a.metricsStats.M5_ALPHA=1-Math.exp(-5/60/5),a.metricsStats.M15_ALPHA=1-Math.exp(-5/60/15),a.metricsStats.ExponentiallyWeightedMovingAverage=function(b,c){this.alpha=b,this.interval=c||5e3,this.currentRate=null,this.uncounted=0,this.lastTick=a.util.now()},a.metricsStats.ExponentiallyWeightedMovingAverage.prototype.update=function(a){this.uncounted+=a||1,this.tick()},a.metricsStats.ExponentiallyWeightedMovingAverage.prototype.tick=function(){var b=a.util.now(),c=b-this.lastTick;if(c>this.interval){this.lastTick=b-c%this.interval;for(var d=Math.floor(c/this.interval),e=0;d>e;++e){var f=this.uncounted/this.interval;this.uncounted=0,null!==this.currentRate?this.currentRate+=this.alpha*(f-this.currentRate):this.currentRate=f}}},a.metricsStats.ExponentiallyWeightedMovingAverage.prototype.rate=function(){return 1e3*this.currentRate};var a=a||{},a=a||{};return a.metricTypes=a.metricTypes||{},a.metricTypes.BaseMetric=function(){this.value=0},a.metricTypes.BaseMetric.prototype.get=function(){return this.value},a.metricTypes.BaseMetric.prototype.unit=function(a){return a?(this.unit=a,this):this.unit},a.MetricsRegistry=function(){this.metrics={}},a.MetricsRegistry.prototype.findOrCreateMetric=function(a,b){var c=this.metrics[a]=this.metrics[a]||new b;return c instanceof b?c:null},a.MetricsRegistry.prototype.makeName=function(a){return Array.prototype.slice.call(a).join(".")},a.MetricsRegistry.prototype.counter=function(){return this.findOrCreateMetric(this.makeName(arguments),a.metricTypes.Counter)},a.MetricsRegistry.prototype.meter=function(){return this.findOrCreateMetric(this.makeName(arguments),a.metricTypes.Meter)},a.MetricsRegistry.prototype.gauge=function(){return this.findOrCreateMetric(this.makeName(arguments),a.metricTypes.Gauge)},a.MetricsRegistry.prototype.histogram=function(){return this.findOrCreateMetric(this.makeName(arguments),a.metricTypes.Histogram)},a.MetricsRegistry.prototype.timer=function(){return this.findOrCreateMetric(this.makeName(arguments),a.metricTypes.Timer)},a.MetricsRegistry.prototype.register=function(a,b){return this.metrics[this.makeName(a)]=b,b},a.MetricsRegistry.prototype.toJson=function(){var a={};for(var b in this.metrics){for(var c=b.split("."),d=a;c.length>1;){var e=c.shift();d=d[e]=d[e]||{}}d[c[0]]=this.metrics[b].get()}return a},a.metrics=new a.MetricsRegistry,a.metricTypes.Counter=a.util.extend(a.metricTypes.BaseMetric,function(){a.metricTypes.BaseMetric.apply(this,arguments),this.value=0}),a.metricTypes.Counter.prototype.inc=function(a){return this.value+=a?a:1},a.metricTypes.Counter.prototype.dec=function(a){return this.value-=a?a:1},a.metricTypes.Gauge=function(a){this.callback=a},a.metricTypes.Gauge.prototype.set=function(a){return callback=a,this},a.metricTypes.Gauge.prototype.get=function(){return callback()},a.metricTypes.Histogram=a.util.extend(a.metricTypes.BaseMetric,function(){a.metricTypes.BaseMetric.apply(this,arguments),this.sample=new a.metricsStats.ExponentiallyDecayingSample,this.clear()}),a.metricTypes.Histogram.prototype.clear=function(){this.sample.clear(),this.min=this.max=null,this.varianceMean=0,this.varianceM2=0,this.sum=0,this.count=0},a.metricTypes.Histogram.prototype.mark=function(b,c){c=c||a.util.now(),this.sample.update(b,c),this.max=null===this.max?b:Math.max(this.max,b),this.min=null===this.min?b:Math.min(this.min,b),this.sum+=b,this.count++;var d=b-this.varianceMean;return this.varianceMean+=d/this.count,this.varianceM2+=d*(b-this.varianceMean),this.count},a.metricTypes.Histogram.prototype.get=function(){var a=this.sample.getValues().map(function(a){return parseFloat(a)}).sort(function(a,b){return a-b}),b=function(b){var c=b*a.length;if(c>=a.length)return a[a.length-1];c=Math.max(0,c),c=Math.min(c,a.length+1);var d=a[Math.floor(c)-1],e=a[Math.floor(c)];return d+(c-Math.floor(c))*(e-d)};return{percentile_10:b(.1),percentile_25:b(.25),median:b(.5),percentile_75:b(.75),percentile_90:b(.9),percentile_95:b(.95),percentile_99:b(.99),percentile_999:b(.999),variance:this.count<1?null:this.varianceM2/(this.count-1),mean:0===this.count?null:this.varianceMean,stdDev:this.count<1?null:Math.sqrt(this.varianceM2/(this.count-1)),count:this.count,sum:this.sum,max:this.max,min:this.min}},a.metricTypes.Meter=a.util.extend(a.metricTypes.BaseMetric,function(){a.metricTypes.BaseMetric.apply(this,arguments),this.m1Rate=new a.metricsStats.ExponentiallyWeightedMovingAverage(a.metricsStats.M1_ALPHA),this.m5Rate=new a.metricsStats.ExponentiallyWeightedMovingAverage(a.metricsStats.M5_ALPHA),this.m15Rate=new a.metricsStats.ExponentiallyWeightedMovingAverage(a.metricsStats.M15_ALPHA),this.startTime=a.util.now(),this.value=0}),a.metricTypes.Meter.prototype.mark=function(a){return a=a||1,this.value+=a,this.m1Rate.update(a),this.m5Rate.update(a),this.m15Rate.update(a),this.value},a.metricTypes.Meter.prototype.get=function(){return{rate_1m:this.m1Rate.rate(),rate_5m:this.m5Rate.rate(),rate_15m:this.m15Rate.rate(),rate_mean:this.value/(a.util.now()-this.startTime)*1e3,count:this.value}},a.metricTypes.Meter.prototype.tick=function(){this.m1Rate.tick(),this.m5Rate.tick(),this.m15Rate.tick()},a.metricTypes.Timer=a.util.extend(a.metricTypes.BaseMetric,function(){a.metricTypes.BaseMetric.apply(this,arguments),this.meter=new a.metricTypes.Meter,this.histogram=new a.metricTypes.Histogram}),a.metricTypes.Timer.prototype.mark=function(a,b){this.meter.mark(),this.histogram.mark(a,b)},a.metricTypes.Timer.prototype.start=function(){var b=this,c=a.util.now();return function(){var d=a.util.now();b.mark(d-c,d)}},a.metricTypes.Timer.prototype.time=function(b){var c=a.util.now();try{b()}finally{var d=a.util.now();this.mark(d-c,d)}},a.metricTypes.Timer.prototype.get=function(){var a=this.histogram.get(),b=this.meter.get();for(var c in b)a[c]=b[c];return a},a});